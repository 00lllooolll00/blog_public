(()=>{var p={NOTE:{icon:"\u2139\uFE0F",class:"alert-note"},TIP:{icon:"\u{1F4A1}",class:"alert-tip"},IMPORTANT:{icon:"\u2757",class:"alert-important"},WARNING:{icon:"\u26A0\uFE0F",class:"alert-warning"},CAUTION:{icon:"\u{1F6A8}",class:"alert-caution"}},f={NOTE:"Note",TIP:"Tip",IMPORTANT:"Important",WARNING:"Warning",CAUTION:"Caution"};function g(e,o,l){let t=document.createElement("div");t.className=`typora-alert ${p[e].class}`;let r=document.createElement("div");r.className="alert-title",r.textContent=o||f[e];let n=document.createElement("div");n.className="alert-content";let c=l.querySelectorAll("p");for(let a=1;a<c.length;a++){let i=c[a].cloneNode(!0);n.appendChild(i)}let d=c[0];if(d){let i=d.textContent.trim().match(/^\[!\w+\]\s*(.+)$/s);if(i&&i[1].trim()){let m=document.createElement("p");m.textContent=i[1].trim(),n.insertBefore(m,n.firstChild)}}if(n.children.length===0){let a=document.createElement("p");n.appendChild(a)}return t.appendChild(r),t.appendChild(n),t}function T(e){let o=e.querySelector("p");if(!o)return!1;let t=o.textContent.trim().match(/^\[!(\w+)\]\s*(.*)$/s);if(!t)return!1;let r=t[1].toUpperCase(),n=t[2].trim();if(!p[r])return!1;let c=g(r,n,e);return e.parentNode.replaceChild(c,e),!0}function s(){let e=document.querySelectorAll("blockquote"),o=0,l=Array.from(e);l.forEach(t=>{T(t)&&o++}),console.log(`Processed ${o} alert boxes from ${l.length} blockquotes`)}function u(){console.log("Typora Alerts initializing..."),console.log("Document ready state:",document.readyState),s(),document.readyState==="loading"&&document.addEventListener("DOMContentLoaded",function(){console.log("DOMContentLoaded event fired, parsing alerts..."),s()}),window.addEventListener("load",function(){console.log("Window load event fired, parsing alerts..."),s()}),setTimeout(function(){console.log("Timeout 500ms, parsing alerts..."),s()},500),setTimeout(function(){console.log("Timeout 2000ms, parsing alerts..."),s()},2e3)}var C={init:u,parseAlerts:s};window.TyporaAlerts=C;u();document.addEventListener("DOMContentLoaded",()=>{console.log("Typora alerts initialized")});})();
