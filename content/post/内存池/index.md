---
title: 嵌入式系统内存池
description: 内存池
date: 2025-08-21
slug: 内存池
image: pic6.png
categories:
    - 嵌入式
tags:
    - 内存池

---
# 内存池管理库 (Pool.c/Pool.h)

## 源码下载

- [Pool.c](/code/Pool/Pool.c)
- [Pool.h](/code/Pool/Pool.h)


## 概述
一个轻量级固定大小内存块管理库，适用于嵌入式系统或高频内存分配场景。通过预分配内存和双向链表管理，提供高效的内存分配与释放功能。

## 功能特性
- ✅ 固定块大小内存管理
- ✅ 双向链表维护空闲块
- ✅ 内存碎片合并优化
- ✅ 内存池完整性检查
- ✅ 清零分配的内存块

## 快速开始
```c
// 初始化内存池（块大小64字节，1024个块）
if(!MemPool_Init(64, 1024)) {
    // 错误处理
}

// 分配内存
void* ptr = MemPool_Malloc(128); // 分配128字节（2个块）

// 使用内存...

// 释放内存
MemPool_Free(ptr);

// 销毁内存池
MemPool_Deinit();
```

## API参考

### 初始化/销毁
| 函数               | 描述           |
| ------------------ | -------------- |
| `MemPool_Init()`   | 初始化内存池   |
| `MemPool_Deinit()` | 释放内存池资源 |

### 内存操作
| 函数               | 描述     |
| ------------------ | -------- |
| `MemPool_Malloc()` | 分配内存 |
| `MemPool_Free()`   | 释放内存 |

## 设计优势
1. **高效分配** - O(1)时间复杂度分配单个块
2. **碎片合并** - 自动合并相邻空闲块
3. **安全校验** - 包含内存池完整性检查
4. **预分配机制** - 避免运行时内存碎片

## 使用限制
⚠️ 仅支持固定块大小分配  
⚠️ 非线程安全  
⚠️ 初始化后无法动态扩展  

## 典型应用场景
- 嵌入式系统内存管理
- 网络数据包缓冲
- 实时任务调度
- 高频内存分配/释放场景

## 示例配置
```c
#define MEMPOOL_BLOCK_SIZE 64   // 每个块64字节
#define MEMPOOL_BLOCK_NUM 1024  // 共1024个块
```

## 性能提示
🔹 分配单个块比多个连续块更快  
🔹 释放时会自动合并相邻空闲块  
🔹 调试时可启用`DEBUG`宏进行检查
```

这个MD文件包含了：
1. 基本介绍
2. 快速使用示例
3. 核心API说明
4. 技术优势
5. 使用限制
6. 应用场景建议
7. 配置和性能提示

格式清晰，可以直接保存为README.md用于项目文档，或根据需要调整内容。